<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>test | Huqiyang&#39;s Blog | 菜鸟成长日记</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Node.js">
    <meta name="description" content="完成进度教师端：
学生的添加删除等操作
考题和分数的添加删除编辑修改等操作
在查看考试情况页面显示所有考生的姓名和学号，以及状态信息（红色：已登录；灰色：未登录；蓝色：考试中；绿色：已交卷）
点击已提交的考生对象，进入该考生的阅卷界面，显示该考生提交考卷和答案的信息，并且可以批阅该考卷的得分；
实时显示考生的状态

学生端：
考生登入系统后，若时间未到，显示倒计时，点击题号弹出警告框；若时间到，">
<meta property="og:type" content="article">
<meta property="og:title" content="test">
<meta property="og:url" content="http://huqiyang.github.io/2017/02/09/test/index.html">
<meta property="og:site_name" content="Huqiyang's Blog">
<meta property="og:description" content="完成进度教师端：
学生的添加删除等操作
考题和分数的添加删除编辑修改等操作
在查看考试情况页面显示所有考生的姓名和学号，以及状态信息（红色：已登录；灰色：未登录；蓝色：考试中；绿色：已交卷）
点击已提交的考生对象，进入该考生的阅卷界面，显示该考生提交考卷和答案的信息，并且可以批阅该考卷的得分；
实时显示考生的状态

学生端：
考生登入系统后，若时间未到，显示倒计时，点击题号弹出警告框；若时间到，">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3120794-d975d39d0cff9300.gif?imageMogr2/auto-orient/strip">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3120794-d285a13d7f052aea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3120794-18d2d665f472586f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3120794-98d5c72e5d57ea1b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3120794-70b0ed6eb88768b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2017-02-09T07:04:47.044Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="test">
<meta name="twitter:description" content="完成进度教师端：
学生的添加删除等操作
考题和分数的添加删除编辑修改等操作
在查看考试情况页面显示所有考生的姓名和学号，以及状态信息（红色：已登录；灰色：未登录；蓝色：考试中；绿色：已交卷）
点击已提交的考生对象，进入该考生的阅卷界面，显示该考生提交考卷和答案的信息，并且可以批阅该考卷的得分；
实时显示考生的状态

学生端：
考生登入系统后，若时间未到，显示倒计时，点击题号弹出警告框；若时间到，">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/3120794-d975d39d0cff9300.gif?imageMogr2/auto-orient/strip">
    
        <link rel="alternative" href="/atom.xml" title="Huqiyang&#39;s Blog" type="application/atom+xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.4.7">
    <script>window.lazyScripts=[]</script>
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">胡麒阳</h5>
          <a href="mailto:huqiyang0124@163.com" title="huqiyang0124@163.com" class="mail">huqiyang0124@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/huqiyang" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/ysweb" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/custom"  >
                <i class="icon icon-lg icon-link"></i>
                简书
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">test</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">test</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-02-09T06:59:35.000Z" itemprop="datePublished" class="page-time">
  2017-02-09
</time>


            
        </h5>
    </div>

    

</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#完成进度"><span class="post-toc-number">1.</span> <span class="post-toc-text">完成进度</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#教师端："><span class="post-toc-number">1.1.</span> <span class="post-toc-text">教师端：</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#学生端："><span class="post-toc-number">1.2.</span> <span class="post-toc-text">学生端：</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#预览"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">预览</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-数据结构定义"><span class="post-toc-number"></span> <span class="post-toc-text">1. 数据结构定义</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#1-用户表"><span class="post-toc-number">0.1.</span> <span class="post-toc-text">1.用户表</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#2-答题表"><span class="post-toc-number">0.2.</span> <span class="post-toc-text">2.答题表</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#3-学生答题内容表"><span class="post-toc-number">0.3.</span> <span class="post-toc-text">3. 学生答题内容表</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-教师端模块分解"><span class="post-toc-number"></span> <span class="post-toc-text">2. 教师端模块分解</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#2-1-学生管理"><span class="post-toc-number">0.1.</span> <span class="post-toc-text">2.1 学生管理</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#2-2-题目管理"><span class="post-toc-number">0.2.</span> <span class="post-toc-text">2.2 题目管理</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#2-3-考试情况"><span class="post-toc-number">0.3.</span> <span class="post-toc-text">2.3 考试情况</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-学生端模块分解"><span class="post-toc-number"></span> <span class="post-toc-text">3. 学生端模块分解</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#3-1-倒计时模块"><span class="post-toc-number">0.1.</span> <span class="post-toc-text">3.1 倒计时模块</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#3-2-答题模块"><span class="post-toc-number">0.2.</span> <span class="post-toc-text">3.2 答题模块</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-模块代码分析"><span class="post-toc-number"></span> <span class="post-toc-text">4. 模块代码分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#4-1-登录检测"><span class="post-toc-number">0.1.</span> <span class="post-toc-text">4.1 登录检测</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#4-2-添加学生（添加题目方法类似）"><span class="post-toc-number">0.2.</span> <span class="post-toc-text">4.2 添加学生（添加题目方法类似）</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#4-3-阅卷（查看考题信息和学生答题模块方法类似）"><span class="post-toc-number">0.3.</span> <span class="post-toc-text">4.3 阅卷（查看考题信息和学生答题模块方法类似）</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#4-4-考生端倒计时"><span class="post-toc-number">0.4.</span> <span class="post-toc-text">4.4 考生端倒计时</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-将考生端的考生状态实时更新到教师端"><span class="post-toc-number"></span> <span class="post-toc-text">5. 将考生端的考生状态实时更新到教师端</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#考生端"><span class="post-toc-number">0.1.</span> <span class="post-toc-text">考生端</span></a></li><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#服务器"><span class="post-toc-number">0.2.</span> <span class="post-toc-text">服务器</span></a></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-test"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">test</h1>
        <div class="post-meta">
            <time class="post-time" title="2017年02月09日 14:59" datetime="2017-02-09T06:59:35.000Z"  itemprop="datePublished">2017-02-09</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <blockquote>
<h5 id="完成进度"><a href="#完成进度" class="headerlink" title="完成进度"></a>完成进度</h5><h6 id="教师端："><a href="#教师端：" class="headerlink" title="教师端："></a>教师端：</h6><ol>
<li>学生的添加删除等操作</li>
<li>考题和分数的添加删除编辑修改等操作</li>
<li>在查看考试情况页面显示所有考生的姓名和学号，以及状态信息（红色：已登录；灰色：未登录；蓝色：考试中；绿色：已交卷）</li>
<li>点击已提交的考生对象，进入该考生的阅卷界面，显示该考生提交考卷和答案的信息，并且可以批阅该考卷的得分；</li>
<li>实时显示考生的状态</li>
</ol>
<h6 id="学生端："><a href="#学生端：" class="headerlink" title="学生端："></a>学生端：</h6><ol>
<li>考生登入系统后，若时间未到，显示倒计时，点击题号弹出警告框；若时间到，可进行答题</li>
<li>点击题号后进入答题状态，同时教师端会实时显示考生的状态；</li>
<li>点击其他题号答题自动保存；</li>
<li>考试时间到自动提交等；</li>
</ol>
</blockquote>
<h6 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h6><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/3120794-d975d39d0cff9300.gif?imageMogr2/auto-orient/strip" alt="教师端实时显示考生状态" title="">
                </div>
                <div class="image-caption">教师端实时显示考生状态</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/3120794-d285a13d7f052aea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="教师端界面" title="">
                </div>
                <div class="image-caption">教师端界面</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/3120794-18d2d665f472586f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="学生端界面" title="">
                </div>
                <div class="image-caption">学生端界面</div>
            </figure>
<h3 id="1-数据结构定义"><a href="#1-数据结构定义" class="headerlink" title="1. 数据结构定义"></a>1. 数据结构定义</h3><h6 id="1-用户表"><a href="#1-用户表" class="headerlink" title="1.用户表"></a>1.用户表</h6><blockquote>
<p>用户学号<code>userId</code>，姓名<code>username</code>， 密码<code>password</code>， 类型<code>category</code>（学生/老师）， 状态<code>status</code>（初始，登录，答题，提交）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var userSchema = new Schema(&#123;</div><div class="line">    userId: String,</div><div class="line">    username: String,</div><div class="line">    password: String,</div><div class="line">    category: String,   //分类-学生</div><div class="line">    status: String, //状态</div><div class="line">    meta: &#123;</div><div class="line">        updateAt: &#123;type:Date, default: Date.now()&#125;,</div><div class="line">        createAt: &#123;type:Date, default: Date.now()&#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h6 id="2-答题表"><a href="#2-答题表" class="headerlink" title="2.答题表"></a>2.答题表</h6><blockquote>
<p>题目内容<code>content</code>，分数<code>score</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var questionSchema = new Schema(&#123;</div><div class="line">    content: String,</div><div class="line">    score: Number,</div><div class="line">    meta: &#123;</div><div class="line">        updateAt: &#123;type:Date, default: Date.now()&#125;,</div><div class="line">        createAt: &#123;type:Date, default: Date.now()&#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h6 id="3-学生答题内容表"><a href="#3-学生答题内容表" class="headerlink" title="3. 学生答题内容表"></a>3. 学生答题内容表</h6><blockquote>
<p>学生ID<code>userId</code>，问题ID<code>questionId</code>，回答内容<code>answerCtn</code>， 批阅后得到的分数<code>score</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var answerSchema = new Schema(&#123;</div><div class="line">    userId: &#123;type: ObjectId, ref: &apos;User&apos;&#125;,</div><div class="line">    questionId: &#123;type: ObjectId, ref: &apos;Question&apos;&#125;,</div><div class="line">    answerCtn: String,</div><div class="line">    score: Number,</div><div class="line">    meta: &#123;</div><div class="line">        updateAt: &#123;type:Date, default: Date.now()&#125;,</div><div class="line">        createAt: &#123;type:Date, default: Date.now()&#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="2-教师端模块分解"><a href="#2-教师端模块分解" class="headerlink" title="2. 教师端模块分解"></a>2. 教师端模块分解</h3><h6 id="2-1-学生管理"><a href="#2-1-学生管理" class="headerlink" title="2.1 学生管理"></a>2.1 学生管理</h6><blockquote>
<ul>
<li>学生列表：查看已添加的学生学号和姓名</li>
<li>添加学生：添加新学生</li>
</ul>
</blockquote>
<h6 id="2-2-题目管理"><a href="#2-2-题目管理" class="headerlink" title="2.2 题目管理"></a>2.2 题目管理</h6><blockquote>
<ul>
<li>查看题目列表：点击题号显示保存的题目内容和分数，点击文本框修改内容</li>
<li>添加题目：添加新题目和分数</li>
</ul>
</blockquote>
<h6 id="2-3-考试情况"><a href="#2-3-考试情况" class="headerlink" title="2.3 考试情况"></a>2.3 考试情况</h6><blockquote>
<ul>
<li>学生考试状态：<ol>
<li>实时查看学生的各种状态信息（红色：已登录；灰色：未登录；蓝色：考试中；绿色：已交卷）</li>
<li>可点击已交卷的学生块，进行对该学生的阅卷操作</li>
</ol>
</li>
<li>学生考试成绩：查看学生的考试成绩信息</li>
</ul>
</blockquote>
<h3 id="3-学生端模块分解"><a href="#3-学生端模块分解" class="headerlink" title="3. 学生端模块分解"></a>3. 学生端模块分解</h3><h6 id="3-1-倒计时模块"><a href="#3-1-倒计时模块" class="headerlink" title="3.1 倒计时模块"></a>3.1 倒计时模块</h6><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/3120794-98d5c72e5d57ea1b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="倒计时模块" title="">
                </div>
                <div class="image-caption">倒计时模块</div>
            </figure>
<blockquote>
<ul>
<li>未到达开考时间显示 “距离考试开始” 的倒计时；</li>
<li>到达开考时间显示 “距离考试结束” 的倒计时，直到考试结束倒计时停止；</li>
</ul>
</blockquote>
<h6 id="3-2-答题模块"><a href="#3-2-答题模块" class="headerlink" title="3.2 答题模块"></a>3.2 答题模块</h6><blockquote>
<ul>
<li>若考试时间未到点击题号，弹出警告框（考试时间未到）；</li>
<li>考试时间到学生点击题号进入答题状态，教师端更新学生状态；</li>
<li>考试未结束考生点击提交或者考试时间到，考生转换成提交状态，教师端更新学生状态，提交状态的考生无法继续答题；</li>
</ul>
</blockquote>
<h3 id="4-模块代码分析"><a href="#4-模块代码分析" class="headerlink" title="4. 模块代码分析"></a>4. 模块代码分析</h3><h6 id="4-1-登录检测"><a href="#4-1-登录检测" class="headerlink" title="4.1 登录检测"></a>4.1 登录检测</h6><blockquote>
<p>用户类型分为考生和教师，在登录时检测用户的类型，如果是教师则登入教师端页面，如果是考生则进入考生页面。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// result为登录成功返回的用户信息</div><div class="line">if (result.data.category === &quot;TEACHER&quot;) &#123;</div><div class="line">    location.href = &quot;/p/index&quot;;</div><div class="line">&#125; else &#123;</div><div class="line">    location.href = &quot;/p/indexStudent&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="4-2-添加学生（添加题目方法类似）"><a href="#4-2-添加学生（添加题目方法类似）" class="headerlink" title="4.2 添加学生（添加题目方法类似）"></a>4.2 添加学生（添加题目方法类似）</h6><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://upload-images.jianshu.io/upload_images/3120794-70b0ed6eb88768b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="添加学生页面元素" title="">
                </div>
                <div class="image-caption">添加学生页面元素</div>
            </figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">//postData()为之后的post提供函数</div><div class="line">function postData(url, data, cb) &#123;</div><div class="line">    var promise = $.ajax(&#123;</div><div class="line">        type: &quot;post&quot;,</div><div class="line">        url: url,</div><div class="line">        dataType: &quot;json&quot;,</div><div class="line">        contentType: &quot;application/json&quot;,</div><div class="line">        data:data</div><div class="line">    &#125;);</div><div class="line">    promise.done(cb);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//传递JSON</div><div class="line">function doAddStudent() &#123;</div><div class="line">    var jsonData = JSON.stringify(&#123;</div><div class="line">        &apos;usrId&apos;: usrId,</div><div class="line">        &apos;pwd&apos;: pwd,</div><div class="line">        &apos;username&apos;: username</div><div class="line">    &#125;);</div><div class="line">    postData(urlAddStudent, jsonData, cbAddStudent);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//返回结果</div><div class="line">function cbAddStudent(result) &#123;</div><div class="line">    if (result.code == 99) &#123;</div><div class="line">        alert(result.msg);</div><div class="line">    &#125; else &#123;</div><div class="line">        alert(&quot;添加成功！&quot;);</div><div class="line">        location.href = &apos;/p/index&apos;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="4-3-阅卷（查看考题信息和学生答题模块方法类似）"><a href="#4-3-阅卷（查看考题信息和学生答题模块方法类似）" class="headerlink" title="4.3 阅卷（查看考题信息和学生答题模块方法类似）"></a>4.3 阅卷（查看考题信息和学生答题模块方法类似）</h6><blockquote>
<p>进入页面通过POST从数据库获得题目列表，渲染出题号列表，每个题号给予一个<code>data-id</code></p>
</blockquote>
<p>post获取题目列表，通过<code>$.format(QUESTION_LIST, list[i]._id, i+1);</code>渲染每一个题号，添加到<code>(&quot;.item-number&quot;</code>里；<br>QUESTION_LIST模板<br><code>var QUESTION_LIST = &quot;&lt;div class=&#39;question-item&#39; data-toggle=&#39;select&#39; data-id=&#39;{0}&#39;&gt;{1}&lt;/div&gt;&quot;;</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">//获取题目列表</div><div class="line">function getQuestionList() &#123;</div><div class="line">    var jsonData = JSON.stringify(&#123;&#125;);</div><div class="line">    postData(urlGetQuestionList, jsonData, cbQuestionList);</div><div class="line">&#125;</div><div class="line">function cbQuestionList(result) &#123;</div><div class="line">    var list = result.results;</div><div class="line">    for(var i = 0; i &lt; list.length; i++) &#123;</div><div class="line">        var html = $.format(QUESTION_LIST, list[i]._id, i+1);</div><div class="line">        $(&quot;.item-number&quot;).append(html);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>点击题号获得<code>data-id</code><br> <code>$(&quot;body&quot;).on(&quot;click&quot;, &quot;[data-toggle=&#39;select&#39;]&quot;, showContent);</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//显示题目内容和学生答题内容</div><div class="line">function showContent(e) &#123;</div><div class="line">    $(&quot;.answer-wrap&quot;).removeClass(&quot;hide&quot;);</div><div class="line">    e.preventDefault();</div><div class="line">    var $this = $(this);</div><div class="line">    questionId = $this.data(&apos;id&apos;);</div><div class="line">    $(&quot;#question-head&quot;).text(&quot;第&quot; + $(this).text() + &quot;题&quot;);</div><div class="line">    getQuestionCtn();</div><div class="line">    getAnswerOne();</div><div class="line">    if(questionId != 0) &#123;</div><div class="line">        saveMark();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>post获取题目内容,返回结果放到指定div内<br><code>$(&quot;#questionContent&quot;).text(result.content);</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//获取题目内容</div><div class="line">function getQuestionCtn() &#123;</div><div class="line">    var jsonData = JSON.stringify(&#123;</div><div class="line">        &quot;_id&quot;: questionId</div><div class="line">    &#125;);</div><div class="line">    postData(urlGetQuestionCtn, jsonData, cbShowQuestionCtn);</div><div class="line">&#125;</div><div class="line">function cbShowQuestionCtn(result) &#123;</div><div class="line">    $(&quot;#que-score&quot;).text(&quot;分值：&quot; + result.score);</div><div class="line">    $(&quot;#questionContent&quot;).text(result.content);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>post获取学生答题内容，返回的结果放到指定div内<br><code>$(&quot;#answerCtn&quot;).text(result.answerCtn);</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//获得学生答案</div><div class="line">function getAnswerOne() &#123;</div><div class="line">    var jsonData = JSON.stringify(&#123;</div><div class="line">        &quot;userId&quot;: studentId,</div><div class="line">        &quot;questionId&quot;: questionId</div><div class="line">    &#125;);</div><div class="line">    postData(urlGetAnswerOne, jsonData, cbShowAnswer);</div><div class="line">&#125;</div><div class="line">function cbShowAnswer(result) &#123;</div><div class="line">    if(result != &quot;99&quot;) &#123;</div><div class="line">        $(&quot;#give-score&quot;).val(result.score);</div><div class="line">        $(&quot;#answerCtn&quot;).text(result.answerCtn);</div><div class="line">    &#125; else &#123;</div><div class="line">        $(&quot;#answerCtn&quot;).text(&quot;该学生没有完成该题目&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h6 id="4-4-考生端倒计时"><a href="#4-4-考生端倒计时" class="headerlink" title="4.4 考生端倒计时"></a>4.4 考生端倒计时</h6><blockquote>
<ol>
<li>将教师设定的开考时间和结束时间分别与当前时间比较，得到相差的时间差毫秒<code>seconds</code>。对<code>seconds</code>进行处理得到格式化的字符串表示时间。</li>
<li>若当前时间小于开考时间，显示距离考试开始倒计时，到时间<code>seconds &lt;= 0</code>，进入答题倒计时，显示距离考试结束倒计时，直到<code>seconds &lt;= 0</code>，停止倒计时并自动提交考卷，考生转换成提交状态<code>SUBMIT</code>；</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">function getTimeDifference(y, n, M, h, m) &#123;</div><div class="line">    var now = new Date();</div><div class="line">    var startTime =  new Date(y, n, M, h, m);</div><div class="line">    var timeDifference = startTime.getTime() - now.getTime();</div><div class="line">    var second = parseInt(timeDifference / 1000);</div><div class="line">    var time = &#123;</div><div class="line">        remain: second,</div><div class="line">        second: (second &lt; 60) ? second : second % 60,</div><div class="line">        hour: parseInt(second / 3600),</div><div class="line">        minute: parseInt((second - parseInt(second / 3600) * 3600) / 60)</div><div class="line">    &#125;;</div><div class="line">    return time;</div><div class="line">&#125;</div><div class="line">//考试开始时间</div><div class="line">function timeBefore() &#123;</div><div class="line">    var timer = setInterval(function() &#123;</div><div class="line">        var time = getTimeDifference(2016, 10, 24, 18, 56);</div><div class="line">        $(&apos;#time-title&apos;).text(&quot;距离考试开始&quot;);</div><div class="line">        $(&apos;#time-ctn&apos;).text(time.hour + &quot; : &quot; + time.minute + &quot; : &quot; + time.second);</div><div class="line">        if(time.remain &lt;= 0) &#123;</div><div class="line">            status = START;</div><div class="line">            showExamTime();</div><div class="line">            clearInterval(timer);</div><div class="line">        &#125;</div><div class="line">    &#125;, 1000);</div><div class="line">&#125;</div><div class="line">//考试结束倒计时</div><div class="line">function showExamTime() &#123;</div><div class="line">    var timer = setInterval(function() &#123;</div><div class="line">        var time = getTimeDifference(2016, 10, 24, 23, 59);</div><div class="line">        $(&apos;#time-title&apos;).text(&quot;距离考试结束&quot;);</div><div class="line">        $(&apos;#time-ctn&apos;).text(time.hour + &quot; : &quot; + time.minute + &quot; : &quot; + time.second);</div><div class="line">        if(time.remain &lt;= 0) &#123;</div><div class="line">            status = END;</div><div class="line">            doUpdate(SUBMIT);</div><div class="line">            clearInterval(timer);</div><div class="line">        &#125;</div><div class="line">    &#125;, 1000);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="5-将考生端的考生状态实时更新到教师端"><a href="#5-将考生端的考生状态实时更新到教师端" class="headerlink" title="5. 将考生端的考生状态实时更新到教师端"></a>5. 将考生端的考生状态实时更新到教师端</h3><blockquote>
<ol>
<li>考生登录系统发送带有用户ID<code>userId</code>和用户类型<code>category</code>的 <code>login</code> 消息给服务器，服务器保存该用户（<code>user[userId] = socket</code>），接着判断该用户是否为教师，若是则保存<code>teacherId</code>；最后在数据库中将该用户状态更新为登录<code>LOGIN</code>状态，向教师端发送<code>reload</code>消息，教师端接收到后重新post获取学生状态;</li>
<li>开考时间到，考生处于可考试状态<code>WAIT</code>，考生点击题号转换成答题状态<code>EXAM</code>，post到数据库更新状态<code>EXAM</code>，同时向服务器发送状态转换消息<code>update status</code>，服务器接收到后向教师端发送<code>reload</code>消息`;</li>
<li>考生点击提交按钮，数据库更新状态<code>SUBMIT</code>，同时向服务器发送状态转换消息<code>update status</code>，服务器接收到后向教师端发送<code>reload</code>消息`;</li>
</ol>
</blockquote>
<h6 id="考生端"><a href="#考生端" class="headerlink" title="考生端"></a>考生端</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">//socket初始化</div><div class="line">function socketInit() &#123;</div><div class="line">    var data = &#123;</div><div class="line">        userId: userId,</div><div class="line">        userCategory: userCategory</div><div class="line">    &#125;;</div><div class="line">    socket.emit(&quot;login&quot;, data);</div><div class="line">    status = LOGIN;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function showQuestion(e) &#123;</div><div class="line">    //如果为开考状态且用户不处于提交状态</div><div class="line">    if(status == START &amp;&amp; userStatus != SUBMIT) &#123;</div><div class="line">        getQuestionCtn();  //获取题目内容</div><div class="line">        getAnswerOne();   //获取保存的答题内容</div><div class="line">        doUpdate(EXAM);  //转换为答题状态</div><div class="line">    &#125; else if(userStatus == SUBMIT) &#123;</div><div class="line">        alert(&quot;你已提交答卷，请等候老师批阅。&quot;);</div><div class="line">    &#125; else if(status != START) &#123;</div><div class="line">        alert(&quot;考试时间未到！&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//获取题目列表</div><div class="line">function getQuestionCtn() &#123;&#125;</div><div class="line">function cbShowQuestionCtn(result) &#123;&#125;</div><div class="line"></div><div class="line">//保存答题内容</div><div class="line">function doSaveAnswer() &#123;&#125;</div><div class="line"></div><div class="line">//获取答题保存的内容</div><div class="line">function getAnswerOne() &#123;&#125;</div><div class="line">function cbShowAnswer(result) &#123;&#125;</div><div class="line"></div><div class="line">//数据库更新用户状态SUBMIT，向教师端发送reload消息</div><div class="line">function doUpdate(status) &#123;</div><div class="line">    socket.emit(&quot;update status&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//转换成SUBMIT状态</div><div class="line">function cbUpdateStatus(result) &#123;</div><div class="line">     userStatus = SUBMIT;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">io.on(&apos;connection&apos;, function(socket)&#123;</div><div class="line">  //用户登录</div><div class="line">  socket.on(&apos;login&apos;, function (data) &#123;</div><div class="line">    socket.name = data.userId;</div><div class="line">    user[data.userId] = socket;</div><div class="line">    var data2 = &#123;</div><div class="line">      userId: socket.name,</div><div class="line">      status: &quot;LOGIN&quot;</div><div class="line">    &#125;;</div><div class="line">    dbHelper.updateStatus(data2, function (success, doc) &#123;&#125;);</div><div class="line">    //用户类型-老师</div><div class="line">    if(data.userCategory === &quot;TEACHER&quot;) &#123;</div><div class="line">      teacherId = data.userId;</div><div class="line">    &#125;</div><div class="line">    //向老师的客户端发送重新加载命令</div><div class="line">    if(teacherId !== 0) &#123;</div><div class="line">      user[teacherId].emit(&quot;reload&quot;);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">  socket.on(&apos;update status&apos;, function () &#123;</div><div class="line">    if(teacherId !== 0) &#123;</div><div class="line">      user[teacherId].emit(&quot;reload&quot;);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">  //用户退出</div><div class="line">  socket.on(&apos;disconnect&apos;, function () &#123;</div><div class="line">    var data = &#123;</div><div class="line">      userId: socket.name,</div><div class="line">      status: &quot;INIT&quot;</div><div class="line">    &#125;;</div><div class="line">    dbHelper.updateStatus(data, function (success, doc) &#123;&#125;);</div><div class="line">    if(socket.name === teacherId) &#123;</div><div class="line">      teacherId = 0;</div><div class="line">    &#125; else if(teacherId !== 0)&#123;</div><div class="line">      user[teacherId].emit(&quot;reload&quot;);</div><div class="line">    &#125;</div><div class="line">    delete user[socket.name];</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><a href="https://github.com/HZNU-QUANTA/NODE-HQY/tree/master/OnlinExamSystem" target="_blank" rel="external">Github参考代码</a></p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2017-02-09T07:04:47.044Z" itemprop="dateUpdated">2017年2月9日 15:04</time>
</span><br>


        这里写留言或版权声明：<a href="/2017/02/09/test/" target="_blank" rel="external">http://huqiyang.github.io/2017/02/09/test/</a>
    </div>
    <footer>
        <a href="http://huqiyang.github.io">
            <img src="/img/avatar.jpg" alt="胡麒阳">
            胡麒阳
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/">Node.js</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://huqiyang.github.io/2017/02/09/test/&title=《test》 — Huqiyang's Blog&pic=http://huqiyang.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://huqiyang.github.io/2017/02/09/test/&title=《test》 — Huqiyang's Blog&source=啦啦啦" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://huqiyang.github.io/2017/02/09/test/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《test》 — Huqiyang's Blog&url=http://huqiyang.github.io/2017/02/09/test/&via=http://huqiyang.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://huqiyang.github.io/2017/02/09/test/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/02/09/hello-world/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Hello World</h4>
      </a>
    </div>
  
</nav>



    

<div class="comments" id="comments">
    <div class="ds-thread" data-thread-key="test" data-title="test" data-url="http://huqiyang.github.io/2017/02/09/test/"></div>
</div>
<script>
lazyScripts.push('//cdn.bootcss.com/marked/0.3.6/marked.min.js');

var duoshuoQuery = {short_name:'huqiyang', theme: 'none'};
lazyScripts.push('/js/embed.min.js?v=1.4.7');


</script>







</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <ul class="reward-items">
        
        <li>
            <img src="/img/wechat.jpg" title="微信打赏二维码" alt="微信打赏二维码">
            <p>微信</p>
        </li>
        

        
        <li>
            <img src="/img/alipay.jpg" title="支付宝打赏二维码" alt="支付宝打赏二维码">
            <p>支付宝</p>
        </li>
        
    </ul>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            <span>博客内容遵循 <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p>
            <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span>
            <span>Huqiyang's Blog &copy; 2015 - 2017</span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://huqiyang.github.io/2017/02/09/test/&title=《test》 — Huqiyang's Blog&pic=http://huqiyang.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://huqiyang.github.io/2017/02/09/test/&title=《test》 — Huqiyang's Blog&source=啦啦啦" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://huqiyang.github.io/2017/02/09/test/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《test》 — Huqiyang's Blog&url=http://huqiyang.github.io/2017/02/09/test/&via=http://huqiyang.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://huqiyang.github.io/2017/02/09/test/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABzklEQVR42u3aQWrEMAwF0Ln/pafQVaFN+mVZJgPPq9Bm7OcshGT59YrH+3tcPf8cyfu/nzcPXFzcNvd9O/J3rrZ3v1Z5flxc3IPcPHhNvFnYNi4u7sO4/RwqSYlwcXE/kXu/jaQQwsXF/RRuUvxUj07yOUdqNVxc3Aa3f2Dafz56vouLi9voSuTBJX8/D15/zICLi3uEmxcnnSRm7e9RrYaLizvAzdul1TeThCYJiK/Cv3FxcXdy8+nWiMkBR3RgiouLe4S7ltZUL16stV7+KX5wcXHHuNWypNOITZ4L3xUXF3eMe3/pKi941sLc/YqFrAoXF3eAO9FM7X+OwpfGxcUd4+Y/y6fem+7g4uKe4VavWeTLVLeRzIaLi3uSmzRW+0lM0iYp5F+4uLhj3M5IglGeEq21ZnFxcSe4a6nGe9O4D51RkxUXF3eA2w9e1eOSfOG1X+Hi4va5a6Enb6b2M6/yKQ4uLm6bWw1h1S5NdWPbajVcXNw2Nw9e1YtWI9cvcHFxD3KT4JWXMf1K63IGXFzcB3PzpuxagLu04eLiPoy7dvBRbbgWIhwuLu4wt1r85It1EqPyPVNcXNxN3LVSpH8BK7/eseF8FxcXN+V+AcpBTdSerLrwAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };



</script>

<script src="/js/main.min.js?v=1.4.7"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.4.7" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


</body>
</html>
